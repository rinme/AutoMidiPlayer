<UserControl
    x:Class="AutoMidiPlayer.WPF.Views.PianoSheetView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:s="https://github.com/canton7/Stylet"
    xmlns:viewModels="clr-namespace:AutoMidiPlayer.WPF.ViewModels"
    xmlns:core="clr-namespace:AutoMidiPlayer.WPF.Core"
    xmlns:controls="clr-namespace:AutoMidiPlayer.WPF.Controls"
    xmlns:properties="clr-namespace:AutoMidiPlayer.Data.Properties;assembly=AutoMidiPlayer.Data"
    d:DataContext="{d:DesignInstance Type=viewModels:PianoSheetViewModel}">

    <UserControl.Resources>
        <properties:Settings x:Key="Settings"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <controls:SimpleStackPanel Grid.Row="0">
            <controls:SimpleStackPanel Orientation="Horizontal">
                <GroupBox Header="Delimiter">
                    <TextBox Text="{Binding Delimiter, UpdateSourceTrigger=PropertyChanged}"/>
                </GroupBox>

                <GroupBox Header="Layout">
                    <ComboBox
                        ItemsSource="{x:Static core:Keyboard.LayoutNames}"
                        SelectedItem="{Binding SelectedLayout}"
                        SelectedIndex="{Binding Default.SelectedLayout, Source={StaticResource Settings}}"
                        DisplayMemberPath="Value"/>
                </GroupBox>
            </controls:SimpleStackPanel>

            <controls:SimpleStackPanel Orientation="Horizontal">
                <GroupBox Header="Split Size">
                    <controls:SimpleStackPanel Orientation="Horizontal">
                        <ui:NumberBox PlaceholderText="Bars"
                                      Value="{Binding Bars}"/>
                        <ui:NumberBox PlaceholderText="Beats"
                                      Value="{Binding Beats}"/>
                        <ui:NumberBox PlaceholderText="Shorten every"
                                      ToolTip="This will divide the delimiter by this number"
                                      Minimum="1"
                                      Value="{Binding Shorten}"/>
                    </controls:SimpleStackPanel>
                </GroupBox>
            </controls:SimpleStackPanel>
        </controls:SimpleStackPanel>

        <TextBox Grid.Row="1"
                 Text="{Binding Result, Mode=OneWay}"
                 IsReadOnly="True"
                 Margin="0,10"/>

        <controls:SimpleStackPanel Grid.Row="2"
                                   Orientation="Horizontal"
                                   Spacing="8">
            <Button Command="{s:Action CopyToClipboard}"
                    ToolTip="Copy to clipboard">
                <controls:SimpleStackPanel Orientation="Horizontal"
                                           Spacing="6">
                    <Path Data="{StaticResource CopyIconGeometry}"
                          Fill="{DynamicResource TextFillColorPrimaryBrush}"
                          Stretch="Uniform"
                          Width="14"
                          Height="14"/>
                    <TextBlock Text="Copy"
                               VerticalAlignment="Center"/>
                </controls:SimpleStackPanel>
            </Button>
            <Button Content="Refresh"
                    Command="{s:Action Update}"/>
        </controls:SimpleStackPanel>
    </Grid>
</UserControl>
